{"version":3,"sources":["woven.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","extractSchemaItems","extractDocumentMeta","extractHAudio","./meta","./microformats","./schema",2,"utils","doc","toArray","getElementsByTagName","reduce","memo","name","content","elemHasAttr","getElemAttrVal","./utils",3,"getElementsByClassName","map","elem","key","val","textForFirstElemByClass",4,"querySelectorAll","mapElement","itemprop","prop","getElemContent","itemtype",5,"textContent","attr","undefined","attributes","value","arr","Array","prototype","slice","firstElemByClass","klass","trim"],"mappings":"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","file":"woven.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nexports.extractSchemaItems = require('./schema').extractSchemaItems\nexports.extractDocumentMeta = require('./meta').extractDocumentMeta\nexports.extractHAudio = require('./microformats').extractHAudio\n\n},{\"./meta\":2,\"./microformats\":3,\"./schema\":4}],2:[function(require,module,exports){\nvar utils = require(\"./utils\")\n\nexports.extractDocumentMeta = function(doc){\n  return utils.toArray(doc.getElementsByTagName('meta'))\n    .reduce(function(memo, e){\n      if(e.name) {\n        memo[e.name] = e.content\n      } else if(utils.elemHasAttr(e, 'property')) {\n        memo[utils.getElemAttrVal(e, 'property')] = e.content\n      } else if(utils.elemHasAttr(e, 'itemprop')) {\n        memo[utils.getElemAttrVal(e, 'itemprop')] = e.content\n      }\n      return memo\n    }, {})\n}\n},{\"./utils\":5}],3:[function(require,module,exports){\nvar utils = require('./utils')\n\nexports.extractHAudio = function(doc){\n  return utils.toArray(doc.getElementsByClassName(\"haudio\"))\n    .map(function(elem){\n      return [\"fn\", \"contributor\", \"album\", \"summary\"]\n        .reduce(function(memo,key){\n          var val = utils.textForFirstElemByClass(elem, key)\n          if (val) memo[key] = val\n          return memo\n        }, {})\n    })\n}\n},{\"./utils\":5}],4:[function(require,module,exports){\nvar utils = require(\"./utils\")\n\nexports.extractSchemaItems = function(doc){\n  return utils.toArray(doc.querySelectorAll(\"[itemtype]\"))\n    .map(mapElement)\n}\n\nvar mapElement = function(elem){\n  return utils.toArray(elem.querySelectorAll(\"[itemprop]\"))\n    .reduce(function(memo, itemprop){\n      var prop = utils.getElemAttrVal(itemprop, \"itemprop\")\n      if (utils.elemHasAttr(itemprop, 'itemtype')) {\n        memo[prop] = mapElement(itemprop)\n      } else {\n        memo[prop] = utils.getElemContent(itemprop)\n      }\n      return memo\n    }, {\n      itemtype: utils.getElemAttrVal(elem, \"itemtype\")\n    })\n}\n\n},{\"./utils\":5}],5:[function(require,module,exports){\nexports.getElemContent = function(elem){\n  if (exports.elemHasAttr(elem, \"content\")) {\n    return exports.getElemAttrVal(elem, \"content\")\n  } else {\n    return elem.textContent\n  }\n}\n\nexports.elemHasAttr = function(elem, attr){\n  return elem.attributes[attr] != undefined\n}\n\nexports.getElemAttrVal = function(elem, attr){\n  if (!exports.elemHasAttr(elem, attr)) return\n  return elem.attributes[attr].value\n}\n\nexports.toArray = function(arr){\n  return Array.prototype.slice.call(arr)\n}\n\nexports.firstElemByClass = function(doc, klass){\n  return doc.getElementsByClassName(klass)[0]\n}\n\nexports.textForFirstElemByClass = function(doc, klass){\n  var elem = exports.firstElemByClass(doc, klass)\n  if (elem) return elem.textContent.trim()\n}\n\n\n// exports.extractText = function(elem) {\n//   if (elem.firstChild) {\n//     return exports.extractText(elem.firstChild)\n//   } else {\n//     return elem.textContent\n//   }\n// }\n\n// exports.isNodeList = function(obj){\n//   return /HTMLCollection/.test(obj.toString())\n// }\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}